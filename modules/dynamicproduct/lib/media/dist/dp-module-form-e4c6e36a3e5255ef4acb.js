/*
* 2010-2022 Tuni-Soft
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* It is available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this module to newer
* versions in the future. If you wish to customize the module for your
* needs please refer to
* http://doc.prestashop.com/display/PS15/Overriding+default+behaviors
* for more information.
*
* @author    Tuni-Soft
* @copyright 2010-2022 Tuni-Soft
* @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/!function(e){function t(t){for(var o,i,a=t[0],c=t[1],l=t[2],d=0,f=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},s={3:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(){return Promise.resolve()},i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.dp_jsonpFunction=window.dp_jsonpFunction||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;r.push([36,0]),n()}({18:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=function(e,t,n,o){var s,r=arguments.length,i=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(r<3?s(i):r>3?s(t,n,i):s(t,n))||i);return r>3&&i&&Object.defineProperty(t,n,i),i},s=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},r=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};class i{constructor(){if(void 0===window.TnModules){const e={list:[],modules:{},prices:{},locks:{price:!1,cart:!1,scroll:!1},customization:null};window.TnModules=e}this.registerEvents()}getData(){return{prices:TnModules.prices}}registerEvents(){"object"==typeof prestashop&&"function"==typeof prestashop.on&&prestashop.on("updateCart",this.handleAddedToCart)}registerModule(e,t){-1===TnModules.list.indexOf(e)&&(TnModules.modules[e]=t,TnModules.list.push(e))}registerModuleCallback(e,t){TnModules.modules[e].customization_callback=t}registerSyncCallback(e,t){TnModules.modules[e].sync_callback=t}registerResponseCallback(e,t){TnModules.modules[e].response_callback=t}handleAddedToCart(){this.release("cart")}isEnabled(){return TnModules.list.length>1}setModulePrices(e,t){TnModules.prices[e]=t}setModuleResponse(e,t){for(const n of TnModules.list)if(n!==e){const e=TnModules.modules[n];e.response_callback&&e.response_callback(t)}}lock(e){TnModules.locks[e]=!0}release(e){TnModules.locks[e]=!1}lockRelease(e){return new Promise((t=>{const n=setInterval((()=>{TnModules.locks[e]||(t(),clearInterval(n))}),100)}))}isLocked(e){return TnModules.locks[e]}acquireCartLock(){return!this.isLocked("cart")&&(this.lock("cart"),!0)}saveCustomization(e){TnModules.customization={id_module:e.id_module,id_customizations:e.id_customizations}}addCustomizationData(e){TnModules.customization&&(e.id_customizations=TnModules.customization.id_customizations)}clearCustomization(){TnModules.customization=null}saveCustomizations(e){return r(this,void 0,void 0,(function*(){for(const t of TnModules.list)if(t!==e){const e=TnModules.modules[t];if(e.customization_callback){if(!(yield e.customization_callback()))return!1}}return!0}))}notifyValueChange(e,t,n){for(const o of TnModules.list)if(o!==e){const e=TnModules.modules[o];e.sync_callback&&e.sync_callback(t,n)}}scrollToFirstError(){if(this.isLocked("scroll"))return!1;this.lock("scroll");const e=$(".tn_invalid:eq(0)").get(0);e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),this.release("scroll"))}}o([(e,t,n)=>{let o=n.value;if("function"!=typeof o)throw new TypeError("@boundMethod decorator can only be applied to methods not: "+typeof o);let s=!1;return{configurable:!0,get(){if(s||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof o)return o;const n=o.bind(this);return s=!0,Object.defineProperty(this,t,{configurable:!0,get:()=>n,set(e){o=e,delete this[t]}}),s=!1,n},set(e){o=e}}},s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],i.prototype,"handleAddedToCart",null)},34:function(e,t){!function(e){e.fn.dpLang=function(){function t(t){if("focusin"==t.type){e(this).find(".dp_lang").length;e(this).addClass("expanded"),e(".dp_lang_container.expanded").not(this).removeClass("expanded")}else e(t.currentTarget).is("html")&&e(".dp_lang_container.expanded").removeClass("expanded")}!!e("html").data("dp_handled")||(e(document).on("focus",".dp_lang_container",t).on("click",".dp_lang_container",(function(e){e.stopPropagation()})).on("keyup",".dp_lang input",(function(t){27==t.keyCode&&e(this).closest(".dp_lang_container").removeClass("expanded")})),e("html").click(t).data("dp_handled",!0)),e(".dp_lang_container").on("click",(function(){event.stopPropagation()}))}}(jQuery)},36:function(e,t,n){"use strict";n.r(t);n(14),n(34);class o{showSuccessMessage(e){showSuccessMessage(e)}showErrorMessage(e){showErrorMessage(e)}showMessage(e){e.success?this.showSuccessMessage(e.message||dpa_message.success):this.showErrorMessage(e.message||dpa_message.error)}}var s=n(18),r=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const i={calculateResult:"price"};class a{constructor(){this.requests={},this.messenger=new o,this.adapter=new s.a}send(e,t=!1,n=null){const o=$.Deferred(),s=$.ajax({data:e,dataType:"json",method:"post",url:this.getController(e.model)});return n&&this.abortPreviousRequests(n,s),$.when(s).then((e=>{this.clearAbortKey(n),e.error&&t&&o.reject(new Error(e.message)),o.resolve(e)})).fail((()=>{o.resolve()})),o}getController(e){const t=`dp_${e}`;if(void 0!==window[t])return window[t];throw new Error("controller not found")}sendWithMessage(e){return r(this,void 0,void 0,(function*(){const t=yield this.send(e);return this.messenger.showMessage(t),t}))}abortPreviousRequests(e,t=null){this.requests[e]&&(i[e]&&this.adapter.release(i[e]),this.requests[e].abort()),t&&(this.requests[e]=t)}clearAbortKey(e){this.requests[e]=null}}var c=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};const l=new class{bootstrap(e){this.starter=e,this.init(),this.detectDocumentReady(),this.detectWindowLoad()}init(){this.document=$(document),this.window=$(window)}detectDocumentReady(){this.document.ready((()=>this.starter.handleDocumentReady()))}detectWindowLoad(){this.window.on("load",(()=>this.starter.handleWindowLoad()))}},u=new class{constructor(){this.ajax=new a,this.messenger=new o}handleDocumentReady(){return c(this,void 0,void 0,(function*(){this.initModuleForm(),this.initConfigForm()}))}handleWindowLoad(){return c(this,void 0,void 0,(function*(){}))}initModuleForm(){$(document).dpLang()}initConfigForm(){$("#configuration_form").on("change","input",(e=>c(this,void 0,void 0,(function*(){const t=e.currentTarget,n={model:"config",action:"save_input_value",name:t.name,value:t.value},o=yield this.ajax.send(n);this.messenger.showMessage(o)}))))}};l.bootstrap(u)}});
//# sourceMappingURL=https://prestalife.net/sourcemaps/dynamic/dp-module-form-94d95a49727574b706ca.js.map