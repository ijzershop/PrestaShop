/*
* 2010-2021 Tuni-Soft
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* It is available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this module to newer
* versions in the future. If you wish to customize the module for your
* needs please refer to
* http://doc.prestashop.com/display/PS15/Overriding+default+behaviors
* for more information.
*
* @author    Tuni-Soft
* @copyright 2010-2021 Tuni-Soft
* @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/!function(e){function t(t){for(var n,i,c=t[0],u=t[1],l=t[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);a&&a(t);while(f.length)f.shift()();return s.push.apply(s,l||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,c=1;c<o.length;c++){var u=o[c];0!==r[u]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},r={1:0},s=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(){return Promise.resolve()},i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.dp_jsonpFunction=window.dp_jsonpFunction||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var a=u;s.push([23,0]),o()}({21:function(e,t){"function"==typeof jQuery&&function(e){var t=e({});void 0===e.subscribe&&(e.subscribe=function(){t.on.apply(t,arguments)}),void 0===e.unsubscribe&&(e.unsubscribe=function(){t.off.apply(t,arguments)}),void 0===e.publish&&(e.publish=function(){t.trigger.apply(t,arguments)})}(jQuery)},23:function(e,t,o){"use strict";o.r(t);o(5);var n=o(0);o(1);var r=function(e,t,o,n){var r,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(s<3?r(i):s>3?r(t,o,i):r(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i};let s=class{showSuccessMessage(e){showSuccessMessage(e)}showErrorMessage(e){showErrorMessage(e)}showMessage(e){e.success?this.showSuccessMessage(e.message||dpa_message.success):this.showErrorMessage(e.message||dpa_message.error)}};s=r([Object(n.c)()],s);o(21);var i=function(e,t,o,n){var r,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(s<3?r(i):s>3?r(t,o,i):r(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let u=class{constructor(){this.debug=!1,this.jquery=jQuery}subscribe(e,t){this.jquery.subscribe(e,t)}resubscribe(e,t,o){e+="."+t,this.jquery.unsubscribe(e),this.jquery.subscribe(e,o)}publish(e,t=null){this.debug&&console.log(e,t),this.jquery.publish(e,t)}unsubscribe(e){this.jquery.unsubscribe(e)}};u=i([Object(n.c)(),c("design:paramtypes",[])],u);var l=function(e,t,o,n){var r,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(s<3?r(i):s>3?r(t,o,i):r(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i},a=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function c(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}u((n=n.apply(e,t||[])).next())}))};class f{constructor(){if(void 0===window.TnModules){const e={list:[],modules:{},prices:{},locks:{price:!1,cart:!1,scroll:!1},customization:null};window.TnModules=e}this.registerEvents()}getData(){return{prices:TnModules.prices}}registerEvents(){"object"==typeof prestashop&&"function"==typeof prestashop.on&&prestashop.on("updateCart",this.handleAddedToCart)}registerModule(e,t){-1===TnModules.list.indexOf(e)&&(TnModules.modules[e]=t,TnModules.list.push(e))}registerModuleCallback(e,t){TnModules.modules[e].customization_callback=t}registerSyncCallback(e,t){TnModules.modules[e].sync_callback=t}registerResponseCallback(e,t){TnModules.modules[e].response_callback=t}handleAddedToCart(){this.release("cart")}isEnabled(){return TnModules.list.length>1}setModulePrices(e,t){TnModules.prices[e]=t}setModuleResponse(e,t){for(const o of TnModules.list)if(o!==e){const e=TnModules.modules[o];e.response_callback&&e.response_callback(t)}}lock(e){TnModules.locks[e]=!0}release(e){TnModules.locks[e]=!1}lockRelease(e){return new Promise((t=>{const o=setInterval((()=>{TnModules.locks[e]||(t(),clearInterval(o))}),100)}))}isLocked(e){return TnModules.locks[e]}acquireCartLock(){return!this.isLocked("cart")&&(this.lock("cart"),!0)}saveCustomization(e){TnModules.customization={id_module:e.id_module,id_customizations:e.id_customizations}}addCustomizationData(e){TnModules.customization&&(e.id_customizations=TnModules.customization.id_customizations)}clearCustomization(){TnModules.customization=null}saveCustomizations(e){return d(this,void 0,void 0,(function*(){for(const t of TnModules.list)if(t!==e){const e=TnModules.modules[t];if(e.customization_callback){if(!(yield e.customization_callback()))return!1}}return!0}))}notifyValueChange(e,t,o){for(const n of TnModules.list)if(n!==e){const e=TnModules.modules[n];e.sync_callback&&e.sync_callback(t,o)}}scrollToFirstError(){if(this.isLocked("scroll"))return!1;this.lock("scroll");const e=$(".tn_invalid:eq(0)").get(0);e&&(e.scrollIntoView({behavior:"smooth",block:"start"}),this.release("scroll"))}}l([(e,t,o)=>{let n=o.value;if("function"!=typeof n)throw new TypeError("@boundMethod decorator can only be applied to methods not: "+typeof n);let r=!1;return{configurable:!0,get(){if(r||this===e.prototype||this.hasOwnProperty(t)||"function"!=typeof n)return n;const o=n.bind(this);return r=!0,Object.defineProperty(this,t,{configurable:!0,get:()=>o,set(e){n=e,delete this[t]}}),r=!1,o},set(e){n=e}}},a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],f.prototype,"handleAddedToCart",null);var p=function(e,t,o,n){var r,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(s<3?r(i):s>3?r(t,o,i):r(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i},h=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function c(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}u((n=n.apply(e,t||[])).next())}))};const b={calculateResult:"price"};let g=class{constructor(e,t,o){this.pubsub=e,this.messenger=t,this.adapter=o,this.requests={}}send(e,t=!1,o=null){const n=$.Deferred(),r=$.ajax({data:e,dataType:"json",method:"post",url:this.getController(e.model)});return o&&this.abortPreviousRequests(o,r),$.when(r).then((e=>{this.clearAbortKey(o),e.error&&t&&n.reject(new Error(e.message)),n.resolve(e)})).fail((()=>{n.resolve()})),n}getController(e){const t=`dp_${e}`;if(void 0!==window[t])return window[t];throw new Error("controller not found")}sendWithMessage(e){return y(this,void 0,void 0,(function*(){const t=yield this.send(e);return this.messenger.showMessage(t),t}))}abortPreviousRequests(e,t=null){this.requests[e]&&(b[e]&&this.adapter.release(b[e]),this.requests[e].abort()),t&&(this.requests[e]=t)}clearAbortKey(e){this.requests[e]=null}};g=p([Object(n.b)(),h("design:paramtypes",[u,s,f])],g);var m=function(e,t,o,n){var r,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(s<3?r(i):s>3?r(t,o,i):r(t,o))||i);return s>3&&i&&Object.defineProperty(t,o,i),i},v=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},w=function(e,t,o,n){return new(o||(o=Promise))((function(r,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function c(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}u((n=n.apply(e,t||[])).next())}))};let j=class{constructor(e,t){this.ajax=e,this.messenger=t}handleDocumentReady(){return w(this,void 0,void 0,(function*(){this.initModuleForm(),this.initConfigForm()}))}handleWindowLoad(){return w(this,void 0,void 0,(function*(){}))}initModuleForm(){$(document).dpLang()}initConfigForm(){$("#configuration_form").on("change","input",(e=>w(this,void 0,void 0,(function*(){const t=e.currentTarget,o={model:"config",action:"save_input_value",name:t.name,value:t.value},n=yield this.ajax.send(o);this.messenger.showMessage(n)}))))}};j=m([Object(n.c)(),v("design:paramtypes",[g,s])],j);const M=new class{bootstrap(e){this.starter=e,this.init(),this.detectDocumentReady(),this.detectWindowLoad()}init(){this.document=$(document),this.window=$(window)}detectDocumentReady(){this.document.ready((()=>this.starter.handleDocumentReady()))}detectWindowLoad(){this.window.on("load",(()=>this.starter.handleWindowLoad()))}},R=n.a.resolve(j);M.bootstrap(R)}});
//# sourceMappingURL=https://prestalife.net/sourcemaps/dynamic/admin/dp-module-form-81e2d8d5ffca146a2eeb.js.map