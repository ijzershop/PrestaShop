/*
* 2010-2021 Tuni-Soft
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* It is available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this module to newer
* versions in the future. If you wish to customize the module for your
* needs please refer to
* http://doc.prestashop.com/display/PS15/Overriding+default+behaviors
* for more information.
*
* @author    Tuni-Soft
* @copyright 2010-2021 Tuni-Soft
* @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/

!function(a){var t,e,r,i,c,n,l,d,s,p,u,o,h,f,v,m,g,k,b,_,x=(e={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(t=65)},r=function(e){var o,t=a(this).parent().parent();0<this.parentNode.className.indexOf("_hex")?t.data("colorpicker").color=o=g(m(this.value)):0<this.parentNode.className.indexOf("_hsb")?t.data("colorpicker").color=o=f({h:parseInt(t.data("colorpicker").fields.eq(4).val(),10),s:parseInt(t.data("colorpicker").fields.eq(5).val(),10),b:parseInt(t.data("colorpicker").fields.eq(6).val(),10)}):t.data("colorpicker").color=o=k(v({r:parseInt(t.data("colorpicker").fields.eq(1).val(),10),g:parseInt(t.data("colorpicker").fields.eq(2).val(),10),b:parseInt(t.data("colorpicker").fields.eq(3).val(),10)})),e&&(w(o,t.get(0)),C(o,t.get(0)),y(o,t.get(0))),M(o,t.get(0)),I(o,t.get(0)),P(o,t.get(0)),t.data("colorpicker").onChange.apply(t,[o,_(o),b(o)])},i=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&r.apply(e.data.field.get(0),[!0]),!1},c=function(e){return r.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),a(document).unbind("mouseup",c),a(document).unbind("mousemove",i),!1},n=function(e){return r.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},l=function(e){return n(e),w(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),C(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),a(document).unbind("mouseup",l),a(document).unbind("mousemove",n),p.apply(a(e.target),[e]),!1},d=function(e){return r.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},s=function(e){return d(e),w(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),C(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),a(document).unbind("mouseup",s),a(document).unbind("mousemove",d),p.apply(a(e.target).closest(".colorpicker_color"),[e]),!1},p=function(e){var o=a(this).parent(),e=(o=!o.hasClass("colorpicker")?a(e.target):o).data("colorpicker").color;o.data("colorpicker").origColor=e,q(e,o.get(0)),o.data("colorpicker").onSubmit(e,_(e),b(e),o.data("colorpicker").el)},u=function(e){o(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),a(document).unbind("mousedown",u))},o=function(e,o,t){if(e==o)return!0;if(e.contains)return e.contains(o);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(o));for(var r=o.parentNode;r&&r!=t;){if(r==e)return!0;r=r.parentNode}return!1},h=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement:document.body).scrollLeft,t:window.pageYOffset||(e?document.documentElement:document.body).scrollTop,w:window.innerWidth||(e?document.documentElement:document.body).clientWidth,h:window.innerHeight||(e?document.documentElement:document.body).clientHeight}},f=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},v=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},m=function(e){var o=6-e.length;if(0<o){for(var t=[],r=0;r<o;r++)t.push("0");t.push(e),e=t.join("")}return e},g=function(e){return k((e=e,{r:(e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16))>>16,g:(65280&e)>>8,b:255&e}))},k=function(e){var o={h:0,s:0,b:0},t=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),t=r-t;return o.b=r,o.s=0!=r?255*t/r:0,0!=o.s?e.r==r?o.h=(e.g-e.b)/t:e.g==r?o.h=2+(e.b-e.r)/t:o.h=4+(e.r-e.g)/t:o.h=-1,o.h*=60,o.h<0&&(o.h+=360),o.s*=100/255,o.b*=100/255,o},b=function(e){var o={},t=Math.round(e.h),r=Math.round(255*e.s/100),i=Math.round(255*e.b/100);return 0==r?o.r=o.g=o.b=i:(i=t%60*((e=i)-(r=(255-r)*i/255))/60,(t=360==t?0:t)<60?(o.r=e,o.b=r,o.g=r+i):t<120?(o.g=e,o.b=r,o.r=e-i):t<180?(o.g=e,o.r=r,o.b=r+i):t<240?(o.b=e,o.r=r,o.g=e-i):t<300?(o.b=e,o.g=r,o.r=r+i):t<360?(o.r=e,o.g=r,o.b=e-i):(o.r=0,o.g=0,o.b=0)),{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}},_=function(e){return e=b(e),t=[e.r.toString(16),e.g.toString(16),e.b.toString(16)],a.each(t,function(e,o){1==o.length&&(t[e]="0"+o)}),t.join("");var t},{init:function(t){if("string"==typeof(t=a.extend({},e,t||{})).color)t.color=g(t.color);else if(null!=t.color.r&&null!=t.color.g&&null!=t.color.b)t.color=k(t.color);else{if(null==t.color.h||null==t.color.s||null==t.color.b)return this;t.color=f(t.color)}return this.each(function(){var e,o;a(this).data("colorpickerId")||((e=a.extend({},t)).origColor=t.color,o="collorpicker_"+parseInt(1e3*Math.random()),a(this).data("colorpickerId",o),o=a('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>').attr("id",o),e.flat?o.appendTo(this).show():o.appendTo(document.body),e.fields=o.find("input").bind("keyup",N).bind("change",r).bind("blur",S).bind("focus",O),o.find("span").bind("mousedown",z).end().find(">div.colorpicker_current_color").bind("click",B),e.selector=o.find("div.colorpicker_color").bind("mousedown",Y),e.selectorIndic=e.selector.find("div div"),e.el=this,e.hue=o.find("div.colorpicker_hue div"),o.find("div.colorpicker_hue").bind("mousedown",H),e.newColor=o.find("div.colorpicker_new_color"),e.currentColor=o.find("div.colorpicker_current_color"),o.data("colorpicker",e),o.find("div.colorpicker_submit").bind("mouseenter",E).bind("mouseleave",j).bind("click",p),w(e.color,o.get(0)),y(e.color,o.get(0)),C(e.color,o.get(0)),I(e.color,o.get(0)),M(e.color,o.get(0)),q(e.color,o.get(0)),P(e.color,o.get(0)),e.flat?o.css({position:"relative",display:"block"}):a(this).bind(e.eventName,T))})},showPicker:function(){return this.each(function(){a(this).data("colorpickerId")&&T.apply(this)})},hidePicker:function(){return this.each(function(){a(this).data("colorpickerId")&&a("#"+a(this).data("colorpickerId")).hide()})},setColor:function(o){if("string"==typeof o)o=g(o);else if(null!=o.r&&null!=o.g&&null!=o.b)o=k(o);else{if(null==o.h||null==o.s||null==o.b)return this;o=f(o)}return this.each(function(){var e;a(this).data("colorpickerId")&&((e=a("#"+a(this).data("colorpickerId"))).data("colorpicker").color=o,e.data("colorpicker").origColor=o,w(o,e.get(0)),y(o,e.get(0)),C(o,e.get(0)),I(o,e.get(0)),M(o,e.get(0)),q(o,e.get(0)),P(o,e.get(0)))})}});function w(e,o){e=b(e),a(o).data("colorpicker").fields.eq(1).val(e.r).end().eq(2).val(e.g).end().eq(3).val(e.b).end()}function y(e,o){a(o).data("colorpicker").fields.eq(4).val(e.h).end().eq(5).val(e.s).end().eq(6).val(e.b).end()}function C(e,o){a(o).data("colorpicker").fields.eq(0).val(_(e)).end()}function M(e,o){a(o).data("colorpicker").selector.css("backgroundColor","#"+_({h:e.h,s:100,b:100})),a(o).data("colorpicker").selectorIndic.css({left:parseInt(150*e.s/100,10),top:parseInt(150*(100-e.b)/100,10)})}function I(e,o){a(o).data("colorpicker").hue.css("top",parseInt(150-150*e.h/360,10))}function q(e,o){a(o).data("colorpicker").currentColor.css("backgroundColor","#"+_(e))}function P(e,o){a(o).data("colorpicker").newColor.css("backgroundColor","#"+_(e))}function N(e){var o=e.charCode||e.keyCode||-1;if(t<o&&o<=90||32==o)return!1;e=a(this).parent().parent(),13==o&&e.find("div.colorpicker_submit").click(),!0===e.data("colorpicker").livePreview&&r.apply(this)}function S(e){a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function O(){t=0<this.parentNode.className.indexOf("_hex")?70:65,a(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),a(this).parent().addClass("colorpicker_focus")}function z(e){var o=a(this).parent().find("input").focus(),o={el:a(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:e.pageY,field:o,val:parseInt(o.val(),10),preview:a(this).parent().parent().data("colorpicker").livePreview};a(document).bind("mouseup",o,c),a(document).bind("mousemove",o,i)}function H(e){var o={cal:a(this).parent(),y:a(this).offset().top};o.preview=o.cal.data("colorpicker").livePreview,a(document).bind("mouseup",o,l),a(document).bind("mousemove",o,n)}function Y(e){var o={cal:a(this).parent(),pos:a(this).offset()};o.preview=o.cal.data("colorpicker").livePreview,a(document).bind("mouseup",o,s),a(document).bind("mousemove",o,d)}function E(e){a(this).addClass("colorpicker_focus")}function j(e){a(this).removeClass("colorpicker_focus")}function T(e){var o=a("#"+a(this).data("colorpickerId"));o.data("colorpicker").onBeforeShow.apply(this,[o.get(0)]);var t=a(this).offset(),r=h(),i=t.top+this.offsetHeight,t=t.left;return i+176>r.t+r.h&&(i-=this.offsetHeight+176),t+356>r.l+r.w&&(t-=356),o.css({left:t+"px",top:i+"px"}),0!=o.data("colorpicker").onShow.apply(this,[o.get(0)])&&o.show(),a(document).bind("mousedown",{cal:o},u),!1}function B(){var e=a(this).parent(),o=e.data("colorpicker").origColor;e.data("colorpicker").color=o,w(o,e.get(0)),C(o,e.get(0)),y(o,e.get(0)),M(o,e.get(0)),I(o,e.get(0)),P(o,e.get(0))}a.fn.extend({ColorPicker:x.init,ColorPickerHide:x.hidePicker,ColorPickerShow:x.showPicker,ColorPickerSetColor:x.setColor})}(jQuery);