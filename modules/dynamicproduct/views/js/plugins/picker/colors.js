/*
* 2010-2021 Tuni-Soft
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* It is available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this module to newer
* versions in the future. If you wish to customize the module for your
* needs please refer to
* http://doc.prestashop.com/display/PS15/Overriding+default+behaviors
* for more information.
*
* @author    Tuni-Soft
* @copyright 2010-2021 Tuni-Soft
* @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/

!function(r){r.Colors=function(r,g){"use strict";var E={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},H=r.Math,X=H.round,w={},D={},t={r:.298954,g:.586434,b:.114612},o={r:.2126,g:.7152,b:.0722},n=function(r){this.colors={RND:{}};this.options={color:"rgba(0,0,0,0)",grey:t,luminance:o,valueRanges:E};i(this,r||{})},i=function(r,t){var o,n=r.options,i;a(r);for(var e in t)if(t[e]!==g)n[e]=t[e];i=n.customBG;n.customBG=typeof i==="string"?d.txt2color(i).rgb:i;D=s(r.colors,n.color,g,true)},a=function(r){if(w!==r){w=r;D=r.colors}};function s(r,t,o,n,i){if(typeof t==="string"){var t=d.txt2color(t);o=t.type;D[o]=t[o];i=i!==g?i:t.alpha}else if(t)for(var e in t)r[o][e]=b(t[e]/E[o][e][1],0,1);if(i!==g)r.alpha=b(+i,0,1);return u(o,n?r:g)}function S(r,t,o){var n=w.options.grey,i={};i.RGB={r:r.r,g:r.g,b:r.b};i.rgb={r:t.r,g:t.g,b:t.b};i.alpha=o;i.equivalentGrey=X(n.r*r.r+n.g*r.g+n.b*r.b);i.rgbaMixBlack=L(t,{r:0,g:0,b:0},o,1);i.rgbaMixWhite=L(t,{r:1,g:1,b:1},o,1);i.rgbaMixBlack.luminance=A(i.rgbaMixBlack,true);i.rgbaMixWhite.luminance=A(i.rgbaMixWhite,true);if(w.options.customBG){i.rgbaMixCustom=L(t,w.options.customBG,o,1);i.rgbaMixCustom.luminance=A(i.rgbaMixCustom,true);w.options.customBG.luminance=A(w.options.customBG,true)}return i}function u(r,t){var o=t||D,n=d,i=w.options,e=E,a=o.RND,s,u="",g="",b={hsl:"hsv",rgb:r},c=a.rgb,l,h;if(r!=="alpha"){for(var f in e)if(!e[f][f]){if(r!==f){g=b[f]||"rgb";o[f]=n[g+"2"+f](o[g])}if(!a[f])a[f]={};s=o[f];for(u in s)a[f][u]=X(s[u]*e[f][u][1])}c=a.rgb;o.HEX=n.RGB2HEX(c);o.equivalentGrey=i.grey.r*o.rgb.r+i.grey.g*o.rgb.g+i.grey.b*o.rgb.b;o.webSave=l=W(c,51);o.webSmart=h=W(c,17);o.saveColor=c.r===l.r&&c.g===l.g&&c.b===l.b?"web save":c.r===h.r&&c.g===h.g&&c.b===h.b?"web smart":"";o.hueRGB=d.hue2RGB(o.hsv.h);if(t)o.background=S(c,o.rgb,o.alpha)}var v=o.rgb,p=o.alpha,m="luminance",x=o.background,B,G,M,y,C,R,k;B=L(v,{r:0,g:0,b:0},p,1);B[m]=A(B,true);o.rgbaMixBlack=B;G=L(v,{r:1,g:1,b:1},p,1);G[m]=A(G,true);o.rgbaMixWhite=G;if(i.customBG){k=L(v,x.rgbaMixCustom,p,1);k[m]=A(k,true);k.WCAG2Ratio=q(k[m],x.rgbaMixCustom[m]);o.rgbaMixBGMixCustom=k;k.luminanceDelta=H.abs(k[m]-x.rgbaMixCustom[m]);k.hueDelta=N(x.rgbaMixCustom,k,true)}o.RGBLuminance=A(c);o.HUELuminance=A(o.hueRGB);if(i.convertCallback)i.convertCallback(o,r);return o}n.prototype.setColor=function(r,t,o){a(this);if(r)return s(this.colors,r,t,g,o);else{if(o!==g)this.colors.alpha=b(o,0,1);return u(t)}},n.prototype.setCustomBackground=function(r){a(this);this.options.customBG=typeof r==="string"?d.txt2color(r).rgb:r;return s(this.colors,g,"rgb")},n.prototype.saveAsBackground=function(){a(this);return s(this.colors,g,"rgb",true)},n.prototype.toString=function(r,t){return d.color2text((r||"rgb").toLowerCase(),this.colors,t)};var d={txt2color:function(r){var t={},o=r.replace(/(?:#|\)|%)/g,"").split("("),n=(o[1]||"").split(/,\s*/),i=o[1]?o[0].substr(0,3):"rgb",e="";t.type=i;t[i]={};if(o[1])for(var a=3;a--;){e=i[a]||i.charAt(a);t[i][e]=+n[a]/E[i][e][1]}else t.rgb=d.HEX2rgb(o[0]);t.alpha=n[3]?+n[3]:1;return t},color2text:function(r,t,o){var n=o!==false&&X(t.alpha*100)/100,i=typeof n==="number"&&o!==false&&(o||n!==1),e=t.RND.rgb,a=t.RND.hsl,s=r==="hex"&&i,u=r==="hex"&&!s,g=r==="rgb"||s,b=g?e.r+", "+e.g+", "+e.b:!u?a.h+", "+a.s+"%, "+a.l+"%":"#"+t.HEX;return u?b:(s?"rgb":r)+(i?"a":"")+"("+b+(i?", "+n:"")+")"},RGB2HEX:function(r){return((r.r<16?"0":"")+r.r.toString(16)+(r.g<16?"0":"")+r.g.toString(16)+(r.b<16?"0":"")+r.b.toString(16)).toUpperCase()},HEX2rgb:function(r){r=r.split("");return{r:+("0x"+r[0]+r[r[3]?1:0])/255,g:+("0x"+r[r[3]?2:1]+(r[3]||r[1]))/255,b:+("0x"+(r[4]||r[2])+(r[5]||r[2]))/255}},hue2RGB:function(r){var t=r*6,o=~~t%6,n=t===6?0:t-o;return{r:X([1,1-n,0,0,n,1][o]*255),g:X([n,1,1,1-n,0,0][o]*255),b:X([0,0,n,1,1,1-n][o]*255)}},rgb2hsv:function(r){var t=r.r,o=r.g,n=r.b,i=0,e,a,s;if(o<n){o=n+(n=o,0);i=-1}a=n;if(t<o){t=o+(o=t,0);i=-2/6-i;a=H.min(o,n)}e=t-a;s=t?e/t:0;return{h:s<1e-15?D&&D.hsl&&D.hsl.h||0:e?H.abs(i+(o-n)/(6*e)):0,s:t?e/t:D&&D.hsv&&D.hsv.s||0,v:t}},hsv2rgb:function(r){var t=r.h*6,o=r.s,n=r.v,i=~~t,e=t-i,a=n*(1-o),s=n*(1-e*o),u=n*(1-(1-e)*o),g=i%6;return{r:[n,s,a,a,u,n][g],g:[u,n,n,s,a,a][g],b:[a,a,u,n,n,s][g]}},hsv2hsl:function(r){var t=(2-r.s)*r.v,o=r.s*r.v;o=!r.s?0:t<1?t?o/t:0:o/(2-t);return{h:r.h,s:!r.v&&!o?D&&D.hsl&&D.hsl.s||0:o,l:t/2}},rgb2hsl:function(r,t){var o=d.rgb2hsv(r);return d.hsv2hsl(t?o:D.hsv=o)},hsl2rgb:function(r){var t=r.h*6,o=r.s,n=r.l,i=n<.5?n*(1+o):n+o-o*n,e=n+n-i,a=i?(i-e)/i:0,s=~~t,u=t-s,g=i*a*u,b=e+g,c=i-g,l=s%6;return{r:[i,c,e,e,b,i][l],g:[b,i,i,c,e,e][l],b:[e,e,b,i,i,c][l]}}};function W(r,t){var o={},n=0,i=t/2;for(var e in r){n=r[e]%t;o[e]=r[e]+(n>i?t-n:-n)}return o}function N(r,t,o){return(H.max(r.r-t.r,t.r-r.r)+H.max(r.g-t.g,t.g-r.g)+H.max(r.b-t.b,t.b-r.b))*(o?255:1)/765}function A(r,t){var o=t?1:255,n=[r.r/o,r.g/o,r.b/o],i=w.options.luminance;for(var e=n.length;e--;)n[e]=n[e]<=.03928?n[e]/12.92:H.pow((n[e]+.055)/1.055,2.4);return i.r*n[0]+i.g*n[1]+i.b*n[2]}function L(r,t,o,n){var i={},e=o!==g?o:1,a=n!==g?n:1,s=e+a*(1-e);for(var u in r)i[u]=(r[u]*e+t[u]*a*(1-e))/s;i.a=s;return i}function q(r,t){var o=1;if(r>=t)o=(r+.05)/(t+.05);else o=(t+.05)/(r+.05);return X(o*100)/100}function b(r,t,o){return r>o?o:r<t?t:r}return n}(r)}(this);