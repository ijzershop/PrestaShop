/*
* 2010-2019 Tuni-Soft
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* It is available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this module to newer
* versions in the future. If you wish to customize the module for your
* needs please refer to
* http://doc.prestashop.com/display/PS15/Overriding+default+behaviors
* for more information.
*
* @author    Tuni-Soft
* @copyright 2010-2019 Tuni-Soft
* @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/

!function(r,t){r.Colors=function(r,u){"use strict";var k={rgb:{r:[0,255],g:[0,255],b:[0,255]},hsv:{h:[0,360],s:[0,100],v:[0,100]},hsl:{h:[0,360],s:[0,100],l:[0,100]},alpha:{alpha:[0,1]},HEX:{HEX:[0,16777215]}},E=r.Math,H=E.round,X={},w={},t={r:.298954,g:.586434,b:.114612},o={r:.2126,g:.7152,b:.0722},n=function(r){this.colors={RND:{}},this.options={color:"rgba(0,0,0,0)",grey:t,luminance:o,valueRanges:k},a(this,r||{})},a=function(r,t){var o,n=r.options;for(var a in s(r),t)t[a]!==u&&(n[a]=t[a]);o=n.customBG,n.customBG="string"==typeof o?D.txt2color(o).rgb:o,w=i(r.colors,n.color,u,!0)},s=function(r){X!==r&&(w=(X=r).colors)};function i(r,t,o,n,a){if("string"==typeof t){var t=D.txt2color(t);o=t.type,w[o]=t[o],a=a!==u?a:t.alpha}else if(t)for(var s in t)r[o][s]=g(t[s]/k[o][s][1],0,1);return a!==u&&(r.alpha=g(+a,0,1)),e(o,n?r:u)}function e(r,t){var o,n,a,s=t||w,i=D,e=X.options,g=k,u=s.RND,b="",c="",l={hsl:"hsv",rgb:r},h=u.rgb;if("alpha"!==r){for(var v in g)if(!g[v][v])for(b in r!==v&&(c=l[v]||"rgb",s[v]=i[c+"2"+v](s[c])),u[v]||(u[v]={}),o=s[v])u[v][b]=H(o[b]*g[v][b][1]);h=u.rgb,s.HEX=i.RGB2HEX(h),s.equivalentGrey=e.grey.r*s.rgb.r+e.grey.g*s.rgb.g+e.grey.b*s.rgb.b,s.webSave=n=S(h,51),s.webSmart=a=S(h,17),s.saveColor=h.r===n.r&&h.g===n.g&&h.b===n.b?"web save":h.r===a.r&&h.g===a.g&&h.b===a.b?"web smart":"",s.hueRGB=D.hue2RGB(s.hsv.h),t&&(s.background=function(r,t,o){var n=X.options.grey,a={};a.RGB={r:r.r,g:r.g,b:r.b},a.rgb={r:t.r,g:t.g,b:t.b},a.alpha=o,a.equivalentGrey=H(n.r*r.r+n.g*r.g+n.b*r.b),a.rgbaMixBlack=W(t,{r:0,g:0,b:0},o,1),a.rgbaMixWhite=W(t,{r:1,g:1,b:1},o,1),a.rgbaMixBlack.luminance=d(a.rgbaMixBlack,!0),a.rgbaMixWhite.luminance=d(a.rgbaMixWhite,!0),X.options.customBG&&(a.rgbaMixCustom=W(t,X.options.customBG,o,1),a.rgbaMixCustom.luminance=d(a.rgbaMixCustom,!0),X.options.customBG.luminance=d(X.options.customBG,!0));return a}(h,s.rgb,s.alpha))}var f,p,m,x,B,G,M=s.rgb,y=s.alpha,C="luminance",R=s.background;return(f=W(M,{r:0,g:0,b:0},y,1))[C]=d(f,!0),s.rgbaMixBlack=f,(p=W(M,{r:1,g:1,b:1},y,1))[C]=d(p,!0),s.rgbaMixWhite=p,e.customBG&&((m=W(M,R.rgbaMixCustom,y,1))[C]=d(m,!0),m.WCAG2Ratio=function(r,t){var o=1;o=t<=r?(r+.05)/(t+.05):(t+.05)/(r+.05);return H(100*o)/100}(m[C],R.rgbaMixCustom[C]),(s.rgbaMixBGMixCustom=m).luminanceDelta=E.abs(m[C]-R.rgbaMixCustom[C]),m.hueDelta=(x=R.rgbaMixCustom,B=m,G=!0,(E.max(x.r-B.r,B.r-x.r)+E.max(x.g-B.g,B.g-x.g)+E.max(x.b-B.b,B.b-x.b))*(G?255:1)/765)),s.RGBLuminance=d(h),s.HUELuminance=d(s.hueRGB),e.convertCallback&&e.convertCallback(s,r),s}n.prototype.setColor=function(r,t,o){return s(this),r?i(this.colors,r,t,u,o):(o!==u&&(this.colors.alpha=g(o,0,1)),e(t))},n.prototype.setCustomBackground=function(r){return s(this),this.options.customBG="string"==typeof r?D.txt2color(r).rgb:r,i(this.colors,u,"rgb")},n.prototype.saveAsBackground=function(){return s(this),i(this.colors,u,"rgb",!0)},n.prototype.toString=function(r,t){return D.color2text((r||"rgb").toLowerCase(),this.colors,t)};var D={txt2color:function(r){var t={},o=r.replace(/(?:#|\)|%)/g,"").split("("),n=(o[1]||"").split(/,\s*/),a=o[1]?o[0].substr(0,3):"rgb",s="";if(t.type=a,t[a]={},o[1])for(var i=3;i--;)s=a[i]||a.charAt(i),t[a][s]=+n[i]/k[a][s][1];else t.rgb=D.HEX2rgb(o[0]);return t.alpha=n[3]?+n[3]:1,t},color2text:function(r,t,o){var n=!1!==o&&H(100*t.alpha)/100,a="number"==typeof n&&!1!==o&&(o||1!==n),s=t.RND.rgb,i=t.RND.hsl,e="hex"===r&&a,g="hex"===r&&!e,u="rgb"===r||e,b=u?s.r+", "+s.g+", "+s.b:g?"#"+t.HEX:i.h+", "+i.s+"%, "+i.l+"%";return g?b:(e?"rgb":r)+(a?"a":"")+"("+b+(a?", "+n:"")+")"},RGB2HEX:function(r){return((r.r<16?"0":"")+r.r.toString(16)+(r.g<16?"0":"")+r.g.toString(16)+(r.b<16?"0":"")+r.b.toString(16)).toUpperCase()},HEX2rgb:function(r){return{r:+("0x"+(r=r.split(""))[0]+r[r[3]?1:0])/255,g:+("0x"+r[r[3]?2:1]+(r[3]||r[1]))/255,b:+("0x"+(r[4]||r[2])+(r[5]||r[2]))/255}},hue2RGB:function(r){var t=6*r,o=~~t%6,n=6===t?0:t-o;return{r:H(255*[1,1-n,0,0,n,1][o]),g:H(255*[n,1,1,1-n,0,0][o]),b:H(255*[0,0,n,1,1,1-n][o])}},rgb2hsv:function(r){var t,o,n=r.r,a=r.g,s=r.b,i=0;return a<s&&(a=s+(s=a,0),i=-1),o=s,n<a&&(n=a+(a=n,0),i=-2/6-i,o=E.min(a,s)),t=n-o,{h:(n?t/n:0)<1e-15?w&&w.hsl&&w.hsl.h||0:t?E.abs(i+(a-s)/(6*t)):0,s:n?t/n:w&&w.hsv&&w.hsv.s||0,v:n}},hsv2rgb:function(r){var t=6*r.h,o=r.s,n=r.v,a=~~t,s=t-a,i=n*(1-o),e=n*(1-s*o),g=n*(1-(1-s)*o),u=a%6;return{r:[n,e,i,i,g,n][u],g:[g,n,n,e,i,i][u],b:[i,i,g,n,n,e][u]}},hsv2hsl:function(r){var t=(2-r.s)*r.v,o=r.s*r.v;return o=r.s?t<1?t?o/t:0:o/(2-t):0,{h:r.h,s:r.v||o?o:w&&w.hsl&&w.hsl.s||0,l:t/2}},rgb2hsl:function(r,t){var o=D.rgb2hsv(r);return D.hsv2hsl(t?o:w.hsv=o)},hsl2rgb:function(r){var t=6*r.h,o=r.s,n=r.l,a=n<.5?n*(1+o):n+o-o*n,s=n+n-a,i=a?(a-s)/a:0,e=~~t,g=t-e,u=a*i*g,b=s+u,c=a-u,l=e%6;return{r:[a,c,s,s,b,a][l],g:[b,a,a,c,s,s][l],b:[s,s,b,a,a,c][l]}}};function S(r,t){var o={},n=0,a=t/2;for(var s in r)n=r[s]%t,o[s]=r[s]+(a<n?t-n:-n);return o}function d(r,t){for(var o=t?1:255,n=[r.r/o,r.g/o,r.b/o],a=X.options.luminance,s=n.length;s--;)n[s]=n[s]<=.03928?n[s]/12.92:E.pow((n[s]+.055)/1.055,2.4);return a.r*n[0]+a.g*n[1]+a.b*n[2]}function W(r,t,o,n){var a={},s=o!==u?o:1,i=n!==u?n:1,e=s+i*(1-s);for(var g in r)a[g]=(r[g]*s+t[g]*i*(1-s))/e;return a.a=e,a}function g(r,t,o){return o<r?o:r<t?t:r}return n}(r)}(this);