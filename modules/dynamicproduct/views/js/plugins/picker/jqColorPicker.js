/*
* 2010-2019 Tuni-Soft
*
* NOTICE OF LICENSE
*
* This source file is subject to the Academic Free License (AFL 3.0)
* It is available through the world-wide-web at this URL:
* http://opensource.org/licenses/afl-3.0.php
* If you did not receive a copy of the license and are unable to
* obtain it through the world-wide-web, please send an email
* to license@prestashop.com so we can send you a copy immediately.
*
* DISCLAIMER
*
* Do not edit or add to this file if you wish to upgrade this module to newer
* versions in the future. If you wish to customize the module for your
* needs please refer to
* http://doc.prestashop.com/display/PS15/Overriding+default+behaviors
* for more information.
*
* @author    Tuni-Soft
* @copyright 2010-2019 Tuni-Soft
* @license   http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
*/

!function(e,i){"object"==typeof exports||("function"==typeof define&&define.amd?define(["jquery","colors"],function(t,o){return i(e,t,o)}):i(e,e.jQuery,e.Colors))}(this,function(r,s,o,g){"use strict";var n,v,_,b,l,m,k,w,x,C,y,e=s(document),c=s(),i="touchmove.tcp mousemove.tcp pointermove.tcp",a="touchstart.tcp mousedown.tcp pointerdown.tcp",d="touchend.tcp mouseup.tcp pointerup.tcp",F=!1,R=r.requestAnimationFrame||r.webkitRequestAnimationFrame||function(t){t()},p='<div class="cp-color-picker"><div class="cp-z-slider"><div class="cp-z-cursor"></div></div><div class="cp-xy-slider"><div class="cp-white"></div><div class="cp-xy-cursor"></div></div><div class="cp-alpha"><div class="cp-alpha-cursor"></div></div></div>',h=function(t){v=this.color=new o(t),_=v.options,n=this};function u(t){return t.value||t.getAttribute("value")||s(t).css("background-color")||"#FFF"}function f(t){return(t=t.originalEvent&&t.originalEvent.touches?t.originalEvent.touches[0]:t).originalEvent?t.originalEvent:t}function z(t){return s(t.find(_.doRender)[0]||t[0])}function M(t){var o=s(this),e=o.offset(),i=s(r),c=_.gap;t?((b=z(o))._colorMode=b.data("colorMode"),n.$trigger=o,(l||s(p).css({margin:_.margin}).appendTo("body").show(0,function(){n.$UI=l=s(this),F=_.GPU&&l.css("perspective")!==g,m=s(".cp-z-slider",this),k=s(".cp-xy-slider",this),w=s(".cp-xy-cursor",this),x=s(".cp-z-cursor",this),C=s(".cp-alpha",this),y=s(".cp-alpha-cursor",this),_.buildCallback.call(n,l),l.prepend("<div>").children().eq(0).css("width",l.children().eq(0).width()),l._width=this.offsetWidth,l._height=this.offsetHeight}).hide()).css(_.positionCallback.call(n,o)||{left:(l._left=e.left)-(0<(l._left+=l._width-(i.scrollLeft()+i.width()))+c?l._left+c:0),top:(l._top=e.top+o.outerHeight())-(0<(l._top+=l._height-(i.scrollTop()+i.height()))+c?l._top+c:0)}).show(_.animationSpeed,function(){!0!==t&&(C.toggle(!!_.opacity)._width=C.width(),k._width=k.width(),k._height=k.height(),m._height=m.height(),v.setColor(u(b[0])),P(!0))}).off(".tcp").on(a,".cp-xy-slider,.cp-z-slider,.cp-alpha",E)):n.$trigger&&s(l).hide(_.animationSpeed,function(){P(!1),n.$trigger=null}).off(".tcp")}function E(t){var o=this.className.replace(/cp-(.*?)(?:\s*|$)/,"$1").replace("-","_");1<(t.button||t.which)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1,b._offset=s(this).offset(),(o="xy_slider"===o?$:"z_slider"===o?D:G)(t),P(),e.on(d,function(t){e.off(".tcp")}).on(i,function(t){o(t),P()}))}function $(t){var o=f(t),e=o.pageX-b._offset.left,i=o.pageY-b._offset.top;v.setColor({s:e/k._width*100,v:100-i/k._height*100},"hsv")}function D(t){var o=f(t).pageY-b._offset.top;v.setColor({h:360-o/m._height*360},"hsv")}function G(t){var o=(f(t).pageX-b._offset.left)/C._width;v.setColor({},"rgb",o)}function P(t){if(void 0!==b){var o=v.colors,e=o.hueRGB,i=(o.RND.rgb,o.RND.hsl,_.dark),c=_.light,r=v.toString(b._colorModez,_.forceAlpha),s=.22<o.HUELuminance?i:c,n=.22<o.rgbaMixBlack.luminance?i:c,l=(1-o.hsv.h)*m._height,a=o.hsv.s*k._width,d=(1-o.hsv.v)*k._height,p=o.alpha*C._width,h=F?"translate3d":"",u=b[0].value,f=b[0].hasAttribute("value")&&""===u&&t!==g;k._css={backgroundColor:"rgb("+e.r+","+e.g+","+e.b+")"},w._css={transform:h+"("+a+"px, "+d+"px, 0)",left:F?"":a,top:F?"":d,borderColor:.22<o.RGBLuminance?i:c},x._css={transform:h+"(0, "+l+"px, 0)",top:F?"":l,borderColor:"transparent "+s},C._css={backgroundColor:"#"+o.HEX},y._css={transform:h+"("+p+"px, 0, 0)",left:F?"":p,borderColor:n+" transparent"},b._css={backgroundColor:f?"":r,color:f?"":.22<o.rgbaMixBGMixCustom.luminance?i:c},b.text=f?"":u!==r?r:"",t!==g?B(t):R(B)}}function B(t){k.css(k._css),w.css(w._css),x.css(x._css),C.css(C._css),y.css(y._css),_.doRender&&b.css(b._css),b.text&&b.val(b.text),_.renderCallback.call(n,b,"boolean"==typeof t?t:g)}h.prototype={render:P,toggle:M},s.fn.colorPicker=function(i){var o=this,t=function(){};return i=s.extend({animationSpeed:150,GPU:!0,doRender:!0,customBG:"#FFF",opacity:!0,renderCallback:t,buildCallback:t,positionCallback:t,body:document.body,scrollResize:!0,gap:4,dark:"#222",light:"#DDD"},i),!n&&i.scrollResize&&s(r).on("resize.tcp scroll.tcp",function(){n.$trigger&&n.toggle.call(n.$trigger[0],!0)}),c=c.add(this),this.colorPicker=n||new h(i),s(this).data("colorpicker",this.colorPicker),this.options=i,s(i.body).off(".tcp").on(a,function(t){-1===c.add(l).add(s(l).find(t.target)).index(t.target)&&M()}),this.on("focusin.tcp click.tcp",function(t){return n.color.options=s.extend(n.color.options,_=o.options),M.call(this,t),!1}).on("change.tcp",function(){v.setColor(this.value||"#FFF"),o.colorPicker.render(!0)}).each(function(){var t=u(this),o=t.split("("),e=z(s(this));e.data("colorMode",o[1]?o[0].substr(0,3):"HEX").attr("readonly",_.preventFocus),i.doRender&&e.css({"background-color":t,color:function(){return.22<v.setColor(t).rgbaMixBGMixCustom.luminance?i.dark:i.light}})})},s.fn.colorPicker.destroy=function(){s("*").off(".tcp"),n.toggle(!1),c=s()}});