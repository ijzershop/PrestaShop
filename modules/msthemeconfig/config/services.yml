imports:
  - { resource: services_parts/order.yml }
  - { resource: services_parts/address.yml }
  - { resource: services_parts/customer.yml }
  - { resource: services_parts/pdf.yml }
  - { resource: services_parts/offers.yml }

services:
  _defaults:
    public: true

  prestashop.tokenized_url_listener:
    class: MsThemeConfig\EventListener\DmsTokenizedUrlsListener
    arguments:
      - "@security.csrf.token_manager"
      - "@router"
      - "@=service('prestashop.user_provider').getUsername()"
      - "@prestashop.adapter.legacy.context"
    tags:
      - {
        name: kernel.event_listener,
        event: kernel.request,
        method: DmsOnKernelRequest,
      }
