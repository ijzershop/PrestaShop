{#**
 * Copyright since 2007 PrestaShop SA and Contributors
 * PrestaShop is an International Registered Trademark & Property of PrestaShop SA
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Open Software License (OSL 3.0)
 * that is bundled with this package in the file LICENSE.md.
 * It is also available through the world-wide-web at this URL:
 * https://opensource.org/licenses/OSL-3.0
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@prestashop.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade PrestaShop to newer
 * versions in the future. If you wish to customize PrestaShop for your
 * needs please refer to https://devdocs.prestashop.com/ for more information.
 *
 * @author    PrestaShop SA and Contributors <contact@prestashop.com>
 * @copyright Since 2007 PrestaShop SA and Contributors
 * @license   https://opensource.org/licenses/OSL-3.0 Open Software License (OSL 3.0)
 *#}

{% extends '@PrestaShop/Admin/layout.html.twig' %}

{% block content %}

  <style type="text/css">
    {{ extraStyling }}
  </style>

  <!-- Modal Trello Api Card create-->
  <div class="modal fade" id="trelloModal" tabindex="-1" role="dialog" aria-hidden="true" aria-labelledby="trelloModalLabel">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="trelloModalLabel">Nieuwe trello kaart aanmaken voor werkplaats werkzaamheid?</h4>
        </div>
        <div class="modal-body">
          <input type="hidden" id="trello_type" value=""/>
          <input type="hidden" id="trello_order" value=""/>
          <div class="form-group">
            Titel van de kaart
            <input type="text" name="trello_card_title" id="trello_card_title" class="form-control"/>
          </div>
          <div class="form-group">
            Beschrijving van de kaart
            <textarea name="trello_card_descr" id="trello_card_descr" class="form-control" rows="10"></textarea>
          </div>
          <div class="form-group">
            Kaart laan op werkplaats bord op trello
            <select name="trello_card_lane" id="trello_card_lane" class="form-control">
              <option value="605614064ff5a60d98104cdc" selected>Werkzaamheden Venusweg</option>
              <option value="6056142466bcab423fe5be3d">Werkzaamheden Ceresweg</option>
              <option value="6056143bc967238904c8c195">Uitvoering</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" id="trelloActionClose" class="btn btn-danger" data-dismiss="modal">Anuleren</button>
          <button type="button" id="trelloActionOnlyStatus" class="btn btn-primary">Nee, alleen status omzetten</button>
          <button type="button" id="trelloActionStatusAndCard" class="btn btn-primary">Ja, status omzetten en kaart aanmaken</button>
        </div>
      </div>
    </div>
  </div>

  {% include '@PrestaShop/Admin/Sell/Order/Order/Blocks/change_orders_status_modal.html.twig' %}

  {% block orders_kpi %}
    <div class="row">
      <div class="col-md-12">
        <div class="">
          <div class="orders-kpi">
            {{ render(controller(
              'PrestaShopBundle:Admin\\Common:renderKpiRow',
              { 'kpiRow': orderKpi }
            )) }}
          </div>
        </div>
      </div>
    </div>
  {% endblock %}

  {% block order_grid_row %}
    <div class="row">
      <div class="col-12">
        {% include '@PrestaShop/Admin/Common/Grid/grid_panel.html.twig' with {'grid': orderGrid} %}
      </div>
    </div>
  {% endblock %}
{% endblock %}


{% block javascripts %}
  <script type="text/javascript">


    document.onkeydown = function (evt) {

      if(evt.code === 'Enter' ||
        evt.keyCode === 13){
        if(evt.target.id === 'order_reference' ||
          evt.target.id === 'order_customer' ||
          evt.target.id === 'order_email' ||
          evt.target.id === 'order_postcode' ||
          evt.target.id === 'order_total_paid_tax_incl' ||
          evt.target.id === 'order_payment' ||
          evt.target.id === 'order_date_add_from' ||
          evt.target.id === 'order_date_add_to' ||
          evt.target.id === 'order_osname'){
          document.querySelector("[name='order[actions][search]']").click();
        } else {
          return false;
        }
      }
    };

  </script>

  {{ parent() }}

  <script src="{{ asset('themes/default/js/bundle/pagination.js') }}"></script>
  <script src="{{ asset('themes/new-theme/public/order.bundle.js') }}"></script>
{% endblock %}
