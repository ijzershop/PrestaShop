(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboardActivityVisit"],{"078c":function(t,s,a){"use strict";a("31ca")},"09c6":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tw-border-2 tw-border-dashed tw-border-gray-500 tw-bg-gray-100 tw-p-8"},[t._m(0),a("div",{staticClass:"tw-text-base tw-text-center tw-pb-6"},[t._v(" "+t._s(t.$t("needGAPanel.textContent"))+" ")]),a("div",{staticClass:"tw-text-center"},[a("b-button",{attrs:{variant:"primary"},on:{click:function(s){return t.goToSettings()}}},[t._v(t._s(t.$t("needGAPanel.configure")))])],1)])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tw-pb-4"},[e("img",{staticClass:"tw-w-24 tw-m-auto",attrs:{src:a("9943"),alt:"need_google_analytics"}})])}],n={name:"NeedGAPanel",methods:{goToSettings:function(){window.location.href=this.$store.getters.getConfigurationLink}}},o=n,r=a("2877"),d=Object(r["a"])(o,e,i,!1,null,null,null);s["a"]=d.exports},"0d66":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[this.$store.getters.gaIsOnboarded?a("b-container",{staticClass:"tw-px-0",on:{scroll:t.onScroll}},[a("b-button-group",{staticClass:"tw-mb-8",attrs:{size:"sm"}},t._l(t.granularityButtons,(function(s){return a("b-button",{key:s.id,attrs:{id:s.id,variant:s.id==t.pressedButtonId?"primary":"outline-secondary",disabled:s.disabled},on:{click:function(a){return a.preventDefault(),t.activateButton(s)}}},[t._v(t._s(s.label[0].toUpperCase()+s.label.slice(1)))])})),1),a("b-container",{staticClass:"tw-px-0"},[a("LineChartWithLoader",{attrs:{"choice-tab":t.title,"data-sets":t.dataSets,loading:this.$store.state.dashboard.state.loadingVisitsByPeriodicity,granularity:t.granularity,"short-cut-date":this.$store.getters.buttonDate}})],1),a("div",{staticClass:"tw-px-0 col-6"},[a("PieChartWithLoader",{key:t.title,attrs:{data:this.$store.state.dashboard.state.dataVisitsByCategory,loading:this.$store.state.dashboard.state.loadingVisitsByCategory,labels:this.$store.state.dashboard.state.labelsVisitsByCategory,title:t.$t("tabsBody.visits.trafficPerChannel"),"choice-tab":t.title}})],1)],1):a("NeedGAPanel")],1)},i=[],n=(a("7db0"),a("4160"),a("d81d"),a("159b"),a("5530")),o=a("cebc"),r=a("896f"),d=a("0812"),u=a("09c6"),l=a("c1df"),b=a("4c62"),c={name:"Visits",components:{PieChartWithLoader:r["a"],NeedGAPanel:u["a"],LineChartWithLoader:d["a"]},props:{title:{type:String,default:"sessions"}},data:function(){return{buttons:[{id:1,pressed:!0,label:this.$t("tabsBody.dates.hour"),slug:"hours",variantButton:"primary",disabled:!1},{id:2,pressed:!0,label:this.$t("tabsBody.dates.day"),slug:"days",variantButton:"primary",disabled:!1},{id:3,pressed:!1,label:this.$t("tabsBody.dates.week"),slug:"weeks",variantButton:"outline-secondary",disabled:!1},{id:4,pressed:!1,label:this.$t("tabsBody.dates.month"),slug:"months",variantButton:"outline-secondary",disabled:!1}],granularity:"days",pressedButtonId:1,unwatchButtonDate:"",dateRange:null,settingsStorage:new b["a"]("dashboard_settings")}},created:function(){var t=this;if(this.settingsStorage.getItem("chart_granularity")){var s=this.settingsStorage.getItem("chart_granularity"),a=this.buttons.find((function(t){return t.slug===s}));this.activateButton(a)}else this.activateButton(this.granularityButtons[0]);this.setTabSelected("sessions"),this.unwatchButtonDate=this.$store.watch((function(t,s){return{buttonDate:s.buttonDate,dateRange:s.dateRange,compareMode:s.getCompareMode}}),(function(s){t.dateRange=Object(n["a"])({},s.dateRange),t.detectButtonDisable(s.buttonDate,s.dateRange),t.getVisits({date:s.dateRange,granularity:t.granularity})}),{immediate:!0})},beforeDestroy:function(){this.unwatchButtonDate()},watch:{dateRange:function(){var t=this,s=this.granularityButtons.find((function(s){return s.id===t.pressedButtonId}));!s&&this.granularityButtons.length&&this.activateButton(this.granularityButtons[0])}},methods:Object(n["a"])(Object(n["a"])({},Object(o["c"])({getVisits:"getVisits",setTabSelected:"setTabSelected"})),{},{activateButton:function(t){this.granularity=t.slug,this.settingsStorage.set("chart_granularity",t.slug),this.pressedButtonId=t.id,this.deactivateButtons(),t.pressed=!0,t.variantButton="primary",this.getVisits({date:this.$store.getters.dateRange,granularity:this.granularity}),this.$segment.track("Change Granularity",{title:t.label,module:"ps_metrics"})},deactivateButtons:function(){this.buttons.forEach((function(t){t.pressed=!1,t.variantButton="outline-secondary"}))},onScroll:function(t){var s=t.target,a=s.scrollTop,e=s.clientHeight,i=s.scrollHeight;a+e>=i&&this.$segment.track("scroll visits",{title:this.title,module:"ps_metrics"})},detectButtonDisable:function(t,s){switch(t){case"today":case"yesterday":this.buttons[0].disabled=!1,this.buttons[1].disabled=!0,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[0].pressed=!0,this.buttons[0].variantButton="primary";break;case"7days":this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary";break;case"30days":this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!1,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[2].pressed=!0,this.buttons[2].variantButton="primary";break;case"custom":var a=Math.abs(l(s.start).diff(l(s.end),"days"))+1;a<2?(this.buttons[1].disabled=!0,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[0].pressed=!0,this.buttons[0].variantButton="primary"):a<=7?(this.buttons[0].disabled=!0,this.buttons[1].disabled=!1,this.buttons[2].disabled=!0,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary"):a>7&&a<30?(this.buttons[0].disabled=!1,this.buttons[2].disabled=!1,this.buttons[3].disabled=!0,this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary"):(this.buttons.map((function(t){t.disabled=!1})),this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary");break;default:this.buttons.map((function(t){t.disabled=!1})),this.deactivateButtons(),this.buttons[1].pressed=!0,this.buttons[1].variantButton="primary";break}}}),computed:{granularityButtons:function(){var t,s=this,a=[{min:0,max:1,buttonIds:[0]},{min:2,max:7,buttonIds:[1]},{min:8,max:25,buttonIds:[1,2]},{min:26,max:59,buttonIds:[1,2]},{min:60,max:89,buttonIds:[1,2,3]},{min:90,max:1/0,buttonIds:[2,3]}];if(!this.dateRange)return[a[0]];for(var e=l(this.dateRange.start),i=l(this.dateRange.end),n=i.diff(e,"days"),o=a.length-1;!t&&o>=0;o--)n>=a[o].min&&n<=a[o].max&&(t=a[o].buttonIds.map((function(t){return s.buttons[t]})));return t||[]},dataSets:function(){return this.$store.getters.getVisitsDataSets}}},h=c,g=(a("078c"),a("2877")),p=Object(g["a"])(h,e,i,!1,null,"f47b1330",null);s["default"]=p.exports},"31ca":function(t,s,a){var e=a("ae52");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a("499e").default;i("5435c212",e,!0,{sourceMap:!1,shadowMode:!1})},ae52:function(t,s,a){var e=a("24fb");s=e(!1),s.push([t.i,".visit-analysis[data-v-f47b1330]{color:#363a41;font-family:Open Sans;font-size:16px;font-weight:700;letter-spacing:-.17px;line-height:22px;margin:12px 0}",""]),t.exports=s}}]);