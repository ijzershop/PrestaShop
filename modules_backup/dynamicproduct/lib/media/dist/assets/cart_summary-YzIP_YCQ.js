var c=Object.defineProperty;var m=(r,t,i)=>t in r?c(r,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[t]=i;var d=(r,t,i)=>(m(r,typeof t!="symbol"?t+"":t,i),i);function h(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}class p{constructor(){d(this,"selector",".customization-modal .dp_cart.dp_seven_cart")}init(){this.displaySummary(),this.displayOrderDetailsSummary(),this.registerEvents()}registerEvents(){prestashop.on("updatedCart",()=>this.displaySummary()),$(".dp_thumb_view").on("click",t=>this.openPreviewModal(t))}openPreviewModal(t){t==null||t.preventDefault(),t==null||t.stopPropagation();const i=$(t.currentTarget),e=i.data("target"),s=i.data("label"),a=$(e);return a.find(".modal-title").text(s),a.modal("show"),!1}displaySummary(){this.summaryExists()&&$(this.selector).each((t,i)=>{const e=$(i),s=e.data("id_customization"),a=$('[data-target="#product-customizations-modal-'.concat(s,'"]')),o=a.parent();let n=a;o.find("> .dsn-cart-summary").length&&(n=o.find("> .dsn-cart-summary")),a.hide(),e.insertBefore(n),this.displayPreview(e)})}displayOrderDetailsSummary(){this.summaryExists()&&$(this.selector).each((t,i)=>{const e=$(i),a=e.closest(".customization-modal").closest("td").find(".customization a").hide();e.insertBefore(a)})}displayPreview(t){let i=null,e=t.find(".dp-input-field-preview [data-url]");if(e.length&&(i=e.data("url")),e.length||(e=t.find(".dp-input-field-preview img"),i=e.prop("src")),i){const s=t.closest(".cart-item").find(".product-image img");s.length?s.prop("src",i):t.closest(".order-line").find("span.image img").prop("src",i)}}summaryExists(){return $(this.selector).length>0}}const l=new p;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>l.init()):l.init();export{h as __vite_legacy_guard};
