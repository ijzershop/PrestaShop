System.register(["./utils-legacy-DPqkoABS.js"],(function(t,o){"use strict";var e,a,n;return{setters:[t=>{e=t._,a=t.t,n=t.a}],execute:function(){function r(){const t=jQuery("form#add-to-cart-or-refresh");if(t.length){const o={};return t.serializeArray().forEach((t=>{/^group\[/gi.test(t.name)&&(o[t.name]=t.value)})),o}return null}function d(t){document.body.classList.toggle("dp-loading",t),document.body.classList.toggle("dp-loaded",!t)}async function c(){document.body.classList.add("dynamic-product"),d(!0);const t=await $.ajax({url:window.dp.controllers.loader,method:"post",dataType:"json",data:{action:"load_variables",...window.dp,attributes:r(),url_values:Object.fromEntries(new URLSearchParams(window.location.search)),quantity:+jQuery("#quantity_wanted").val()}});t.success&&(Object.keys(t.variables).forEach((o=>{window[o]=t.variables[o]})),await async function(){await Promise.all([e((()=>o.import("./product-buttons-legacy-C-vZsYJF.js")),void 0),e((()=>o.import("./index-legacy-7OOXJTcD.js")),void 0)]),await a(),window.dp.loaded=!0,n(document,"dp-loaded"),d(!1)}())}t({a:function(){let t='#add-to-cart-or-refresh .product-add-to-cart [data-button-action="add-to-cart"]';return window.dp_cart_btn_selector&&(t=window.dp_cart_btn_selector),t},c:function(){const t=jQuery("#dp_product"),o=t.length?t:jQuery('<div id="dp_product"></div>');if("DynamicProduct"===o.data("hook_name"))return o.get(0);let e="#add-to-cart-or-refresh .product-variants";const a=window.dp_hook,n=window.dp_hook_after;return(n||a)&&(e=n||a),jQuery(e).length||console.warn("Dynamic Product: could not move module container, hook not found!"),a?o.appendTo(e):o.insertAfter(e),o.get(0)},g:r,s:function(t){if(!t)return!1;t.preventDefault(),t.stopPropagation()},u:function(t){try{const o=document.body,e=o.dp_classes;if(e&&e.map((t=>o.classList.remove(t))),t){const e=t.map((t=>"dp_condition_"+t));o.dp_classes=e,e.map((t=>o.classList.add(t)))}}catch(o){console.log(o)}},w:async function(t){const o=t.map((t=>new Promise(((o,e)=>{t.complete?o():(t.addEventListener("load",(()=>o())),t.addEventListener("error",e))}))));await Promise.all(o)}});const s=setInterval((async()=>{"complete"===document.readyState&&(clearInterval(s),await c())}),100)}}}));
