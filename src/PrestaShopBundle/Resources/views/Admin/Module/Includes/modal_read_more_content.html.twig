{% set ats = module.attributes %}
{% set name, displayName, nbRates,
  starsRate, img, serviceUrl, version, cover, additionalDescription,
  fullDescription, changeLog, customerBenefits, demoVideo, author, notFoundImg, features, badges =
  ats.get('name'), ats.get('displayName'), ats.get('nbRates'), ats.get('starsRate'), ats.get('img'),
  ats.get('serviceUrl'), ats.get('version'), ats.get('cover'), ats.get('additionalDescription'),
  ats.get('fullDescription'), ats.get('changeLog'), ats.get('customer_benefits'), ats.get('demo_video'),
  ats.get('author'), 'https://cdn4.iconfinder.com/data/icons/ballicons-2-free/100/box-512.png',
  ats.get('features'), ats.get('badges')
%}
<div class="modal-dialog module-modal-dialog">
  <!-- Modal content-->
  <div class="modal-content module-modal-content no-padding">
    <div class="modal-header module-modal-header">
      <button aria-label="Close" data-dismiss="modal" class="close" type="button">
          <span aria-hidden="true">
            <i class="material-icons">close</i>
          </span>
      </button>
      {% if nbRates > 0 %}
        <div class="read-more-stars module-star-ranking-grid-{{ starsRate }}">
          (
          {{ nbRates }}
          )
        </div>
      {% endif %}
      <div>
        <img class="module-logo-thumb" height="57" width="57" src="{{ img }}" alt="{{ displayName }}"/>
        <div class="modal-title module-modal-title">
          <h1>{{ displayName }}<br>
            <small class="version">
              {% if serviceUrl|length > 0 %}
                {{ 'Service by '|trans({}, 'Admin.Modules.Feature') }}
              {% else %}
                {{ 'v%version% by '|trans({ '%version%' : version }, 'Admin.Modules.Feature') }}
              {% endif %}
              {{ author }}
            </small>
          </h1>

        </div>
      </div>
    </div>

    <div class="modal-body row module-modal-body">
      <div class="col-md-12 module-big-cover">
        <img src="{% if cover.big is defined %}{{ cover.big }}{% else %}{{ notFoundImg }}{% endif %}"/>
      </div>
      <div class="col-md-12 module-menu-readmore">
        <nav class="navbar navbar-light">
          {# tab list #}
          <ul class="nav navbar-nav navbar-separator">
            <li class="nav-item active">
              <a class="nav-link module-readmore-tab" data-toggle="tab" href="#overview-{{ name }}">{{ 'Overview'|trans({}, 'Admin.Modules.Feature') }}</a>
            </li>
            {% if additionalDescription|length > 0 %}
              <li class="nav-item">
                <a class="nav-link module-readmore-tab" data-toggle="tab" href="#additional-{{ name }}">{{ 'Additional information'|trans({}, 'Admin.Modules.Feature') }}</a>
              </li>
            {% endif %}
            {% if customerBenefits|length > 0 %}
              <li class="nav-item">
                <a class="nav-link module-readmore-tab" data-toggle="tab" href="#additional-{{ name }}">{{ 'Benefits'|trans({}, 'Admin.Modules.Feature') }}</a>
              </li>
            {% endif %}
            {% if features|length > 0 %}
              <li class="nav-item">
                <a class="nav-link module-readmore-tab" data-toggle="tab" href="#features-{{ name }}">{{ 'Features'|trans({}, 'Admin.Modules.Feature') }}</a>
              </li>
            {% endif %}
            {% if demoVideo|length > 0 %}
              <li class="nav-item">
                <a class="nav-link module-readmore-tab" data-toggle="tab" href="#demo_video-{{ name }}">{{ 'Demo video'|trans({}, 'Admin.Modules.Feature') }}</a>
              </li>
            {% endif %}
            {% if changeLog|length > 0 %}
              <li class="nav-item">
                <a class="nav-link module-readmore-tab" data-toggle="tab" href="#changelog-{{ name }}">{{ 'Changelog'|trans({}, 'Admin.Modules.Feature') }}</a>
              </li>
            {% endif %}
            {# end tab list #}
          </ul>
        </nav>
        <div class="tab-content">
          {# tab content list #}
          <div id="overview-{{ name }}" class="tab-pane fade in active">
            <p class="module-readmore-tab-content">
              {% if fullDescription|length > 0 %}
                {{ fullDescription|raw }}
              {% else %}
                {{ 'No description found for this module :('|trans({}, 'Admin.Modules.Notification') }}
              {% endif %}
            </p>
          </div>

          <div id="additional-{{ name }}" class="tab-pane fade">
            <p class="module-readmore-tab-content">
              {% if additionalDescription|length > 0 %}
                {{ additionalDescription|raw }}
              {% else %}
                {{ 'No Additional description provided for this module :('|trans({}, 'Admin.Modules.Notification') }}
              {% endif %}
            </p>
          </div>

          <div id="features-{{ name }}" class="tab-pane fade">
            <p class="module-readmore-tab-content">
              {% if features|length > 0 %}
                {{ features|raw }}
              {% else %}
                {{ 'No feature list provided for this module :('|trans({}, 'Admin.Modules.Notification') }}
              {% endif %}
            </p>
          </div>

          <div id="customer_benefits-{{ name }}" class="tab-pane fade">
            <p class="module-readmore-tab-content">
              {% if customerBenefits|length > 0 %}
                {{ customerBenefits|raw }}
              {% else %}
                {{ 'No customer benefits notes found for this module :('|trans({}, 'Admin.Modules.Notification') }}
              {% endif %}
            </p>
          </div>

          <div id="demo_video-{{ name }}" class="tab-pane fade">
            <p class="module-readmore-tab-content">
              {% if demoVideo|length %}
                {{ youtube_link(demoVideo)|raw }}
              {% else %}
                {{ 'No demonstration video found for this module :('|trans({}, 'Admin.Modules.Notification') }}
              {% endif %}
            </p>
          </div>

          <div id="changelog-{{ name }}" class="tab-pane fade">
            {% if changeLog|length > 0 %}
              <ul class="module-readmore-tab-content">
                {% for version, lines in changeLog|arrayCast|reverse %}
                  <li>
                    <b>{{version}}:</b>
                    {% for line in lines %}
                      {{line}}<br/>
                    {% endfor %}
                  </li>
                {% endfor %}
              </ul>
            {% else %}
              {{ 'No changelog provided for this module :('|trans({}, 'Admin.Modules.Notification') }}
            {% endif %}
          </div>
          {# end tab content list #}
        </div>
      </div>
    </div>

    <div class="modal-footer module-modal-footer">
      {% if badges|length > 0 %}
        <div class="pull-left module-badges-display">
          {% for badge in badges %}
            <img src="{{badge.img}}" alt="{{badge.label}}"/>
            {{badge.label}}
          {% endfor %}
        </div>
      {% endif %}
      {#{% include 'PrestaShopBundle:Admin/Module/Includes:action_menu.html.twig' with { 'module': module } %}#}
    </div>
  </div>
</div>
